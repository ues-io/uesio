name: lesson
definition:
  components:
    - uesio/core.view:
        view: uesio/docs.topbar
    - uesio/io.grid:
        uesio.variant: uesio/docs.mainlayout
        items:
          - uesio/io.griditem:
              area: main
              uesio.styleTokens:
                root:
                  - min-h-screen
                  - p-[22px]
              components:
                - uesio/io.list:
                    wire: lesson
                    components:
                      - uesio/io.text:
                          uesio.variant: uesio/docs.smallcallout
                          text: ${uesio/docs.article->uesio/cms.name}
                      - uesio/io.text:
                          uesio.variant: uesio/docs.content
                          text: ${uesio/docs.article->uesio/cms.description}
                      - uesio/io.field:
                          uesio.variant: uesio/docs.docsmarkdown
                          fieldId: uesio/docs.article->uesio/cms.content
                          labelPosition: none
                          displayAs: MARKDOWN
          - uesio/io.griditem:
              area: right
              uesio.styleTokens:
                root:
                  - p-[5px]
              components:
                - uesio/io.list:
                    wire: lesson
                    components:
                      - uesio/io.markdownnavigation:
                          uesio.variant: uesio/docs.lesson
                          mdField: uesio/docs.article->uesio/cms.content

  wires:
    track:
      collection: uesio/docs.track
      fields:
        uesio/core.id:
        uesio/docs.name:
        uesio/docs.description:
        uesio/docs.slug:
      conditions:
        - field: uesio/docs.slug
          param: track
          valueSource: PARAM
    article:
      collection: uesio/cms.article
      fields:
        uesio/core.id:
        uesio/cms.slug:
      conditions:
        - field: uesio/cms.slug
          param: lesson
          valueSource: PARAM
    lesson:
      collection: uesio/docs.lesson
      fields:
        uesio/core.id:
        uesio/docs.order:
        uesio/docs.article:
          fields:
            uesio/cms.name:
            uesio/cms.description:
            uesio/cms.content:
        uesio/docs.track:
          fields:
            uesio/docs.slug:
      conditions:
        - field: uesio/docs.track
          lookupWire: track
          lookupField: uesio/core.id
          valueSource: LOOKUP
        - field: uesio/docs.article
          lookupWire: article
          lookupField: uesio/core.id
          valueSource: LOOKUP
