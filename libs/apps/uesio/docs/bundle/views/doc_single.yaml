name: doc_single
definition:
  components:
    - uesio/io.titlebar:
        uesio.variant: uesio/io.main
        title: Admin panel
        subtitle: Is there a doc in the room?!
        # actions:
        #   - uesio/io.group:
        #       components:
        #         - uesio/io.button:
        #             text: Create a New Collection
        #             uesio.variant: uesio/io.secondary

    # variant: Admin section
    - uesio/io.grid:
        uesio.variant: uesio/docs.mainlayout
        items:
          - uesio/io.griditem:
              components:
                - uesio/io.text:
                    text: Documentation
                    element: h3
                - uesio/io.list:
                    wire: articles
                    id: articleList
                    mode: EDIT
                    components:
                      # Active
                      - uesio/io.tile:
                          signals:
                            - signal: "route/NAVIGATE"
                              path: "docs/${uesio/docs.track->uesio/docs.name}/${uesio/cms.slug}"
                          uesio.styles:
                            root:
                              marginBottom: 1em
                              fontWeight: 700
                          content:
                            - uesio/io.text:
                                uesio.display:
                                  - value: $Param{recordid}
                                    field: uesio/core.id
                                    type: fieldValue
                                    operator: EQUALS
                                text: ${uesio/cms.name}
                            # Non active
                            - uesio/io.text:
                                uesio.display:
                                  - value: $Param{recordid}
                                    field: uesio/core.id
                                    operator: NOT_EQUALS
                                text: ${uesio/cms.name}
                                uesio.styles:
                                  root:
                                    opacity: 0.6
          - uesio/io.griditem:
              components:
                - uesio/io.list:
                    wire: article
                    id: articleList
                    mode: READ
                    components:
                      - uesio/io.box:
                          uesio.styles:
                            root:
                              padding: 15px
                          components:
                            - uesio/io.text:
                                text: ${uesio/cms.name}
                                element: h1

                            - uesio/io.field:
                                fieldId: uesio/cms.content
                                displayAs: MARKDOWN
                                id: mdcontent
                                labelPosition: none

  wires:
    articles:
      collection: uesio/cms.article
      order:
        - field: uesio/docs.order
      fields:
        uesio/core.createdat:
        uesio/core.id:
        uesio/docs.track:
          fields:
            uesio/core.id:
            uesio/docs.name:
        uesio/cms.content:
        uesio/cms.name:
        uesio/docs.order:

    article:
      collection: uesio/cms.article
      fields:
        uesio/core.createdat:
        uesio/core.id:
        uesio/docs.track:
          fields:
            uesio/core.id:
            uesio/docs.name:
        uesio/cms.content:
        uesio/cms.name:
      conditions:
        - field: uesio/cms.slug
          param: slug
          valueSource: PARAM
