name: leads
public: true
definition:
  components:
    - uesio/core.view:
        view: uesio/crm.topbar
    - uesio/io.box:
        uesio.variant: uesio/crm.content
        components:
          - uesio/io.titlebar:
              title: Leads
              uesio.variant: uesio/io.main
              actions:
                - uesio/io.group:
                    components:
                      - uesio/io.button:
                          signals:
                            - signal: wire/EMPTY
                              wire: newLead
                            - signal: wire/CREATE_RECORD
                              wire: newLead
                              prepend: true
                            - signal: wire/UPDATE_RECORD
                              wire: newLead
                              field: uesio/crm.status
                              value: OPEN
                            - signal: panel/OPEN
                              panel: newlead
                          text: New
                          uesio.variant: uesio/io.primary
                          icon: add
          - uesio/io.group:
              components:
                - uesio/io.button:
                    text: my leads
                    uesio.variant: uesio/io.secondary
                    signals:
                      - signal: wire/SET_CONDITION_VALUE
                        wire: leads
                        conditionId: owner
                        value: $User{id}
                      - signal: wire/TOGGLE_CONDITION
                        wire: leads
                        conditionId: owner
                      - signal: wire/LOAD
                        wires:
                          - leads
                - uesio/io.searchbox:
                    wire: leads
                    searchFields:
                      - uesio/crm.firstname
                      - uesio/crm.lastname
                      - uesio/crm.account
                      - uesio/core.owner
                # - uesio/io.filter:
                #     wire: leads
                #     fieldId: uesio/core.owner
                #     label: " "
    - uesio/io.tabs:
        tabs:
          - id: basic
            label: Deck View
            components:
              - uesio/io.grid:
                  uesio.styleTokens:
                    root:
                      - grid-cols-3
                      - gap-4
                  items:
                    - uesio/io.box:
                        uesio.styleTokens:
                          root:
                            - shadow
                            - bg-gray-50
                            - rounded-lg
                            - p-4
                        components:
                          - uesio/io.titlebar:
                              uesio.variant: uesio/io.nav
                              title: Open
                          - uesio/io.deck:
                              wire: leads
                              recordDisplay:
                                - field: uesio/crm.status
                                  value: OPEN
                                  operator: EQUALS
                              uesio.styleTokens:
                                root:
                                  - grid-cols-1
                                  - grid
                                  - gap-4
                              components:
                                - uesio/io.box:
                                    uesio.variant: uesio/crm.card
                                    components:
                                      - uesio/io.box:
                                          uesio.styleTokens:
                                            root:
                                              - col-span-2
                                              - p-4
                                          components:
                                            - uesio/io.titlebar:
                                                variant: uesio/io.infotag
                                                title: ${uesio/crm.firstname} ${uesio/crm.lastname}
                                                subtitle: ${uesio/crm.account}
                                                actions:
                                                  - uesio/io.text:
                                                      text: ${uesio/core.owner->uesio/core.firstname}
                                                      uesio.variant: uesio/io.aside
                                            - uesio/io.grid:
                                                items:
                                                  - uesio/io.box:
                                                      components:
                                                        - uesio/io.field:
                                                            fieldId: uesio/crm.email
                                                        - uesio/io.grid:
                                                            uesio.styleTokens:
                                                              root:
                                                                - grid-cols-2
                                                                - gap-4
                                                            items:
                                                              - uesio/io.field:
                                                                  fieldId: uesio/crm.phone_business
                                                              - uesio/io.field:
                                                                  fieldId: uesio/crm.phone_mobile
                                                  - uesio/io.group:
                                                      components:
                                                        - uesio/io.button:
                                                            icon: edit
                                                            signals:
                                                              - signal: route/NAVIGATE_TO_ASSIGNMENT
                                                                collection: uesio/crm.lead
                                                                viewtype: detail
                                                                recordid: ${uesio/core.id}
                    - uesio/io.box:
                        uesio.styleTokens:
                          root:
                            - shadow
                            - bg-gray-50
                            - rounded-lg
                            - p-4
                        components:
                          - uesio/io.titlebar:
                              uesio.variant: uesio/io.nav
                              title: Qualified
                          - uesio/io.deck:
                              wire: leads
                              recordDisplay:
                                - field: uesio/crm.status
                                  value: QUALIFIED
                                  operator: EQUALS
                              uesio.styleTokens:
                                root:
                                  - grid-cols-1
                                  - grid
                                  - gap-4
                              components:
                                - uesio/io.box:
                                    uesio.variant: uesio/crm.card
                                    components:
                                      - uesio/io.box:
                                          uesio.styleTokens:
                                            root:
                                              - col-span-2
                                              - p-4
                                          components:
                                            - uesio/io.titlebar:
                                                variant: uesio/io.infotag
                                                title: ${uesio/crm.firstname} ${uesio/crm.lastname}
                                                subtitle: ${uesio/crm.account}
                                                actions:
                                                  - uesio/io.text:
                                                      text: ${uesio/core.owner->uesio/core.firstname}
                                                      uesio.variant: uesio/io.aside
                                            - uesio/io.grid:
                                                items:
                                                  - uesio/io.box:
                                                      components:
                                                        - uesio/io.field:
                                                            fieldId: uesio/crm.email
                                                        - uesio/io.grid:
                                                            uesio.styleTokens:
                                                              root:
                                                                - grid-cols-2
                                                                - gap-4
                                                            items:
                                                              - uesio/io.field:
                                                                  fieldId: uesio/crm.phone_business
                                                              - uesio/io.field:
                                                                  fieldId: uesio/crm.phone_mobile
                                                  - uesio/io.group:
                                                      components:
                                                        - uesio/io.button:
                                                            icon: edit
                                                            signals:
                                                              - signal: route/NAVIGATE_TO_ASSIGNMENT
                                                                collection: uesio/crm.lead
                                                                viewtype: detail
                                                                recordid: ${uesio/core.id}
                    - uesio/io.box:
                        uesio.styleTokens:
                          root:
                            - shadow
                            - bg-gray-50
                            - rounded-lg
                            - p-4
                        components:
                          - uesio/io.titlebar:
                              uesio.variant: uesio/io.nav
                              title: Disqualified
                          - uesio/io.deck:
                              wire: leads
                              recordDisplay:
                                - field: uesio/crm.status
                                  value: DISQUALIFIED
                                  operator: EQUALS
                              uesio.styleTokens:
                                root:
                                  - grid-cols-1
                                  - grid
                                  - gap-4
                              components:
                                - uesio/io.box:
                                    uesio.variant: uesio/crm.card
                                    components:
                                      - uesio/io.box:
                                          uesio.styleTokens:
                                            root:
                                              - col-span-2
                                              - p-4
                                          components:
                                            - uesio/io.titlebar:
                                                variant: uesio/io.infotag
                                                title: ${uesio/crm.firstname} ${uesio/crm.lastname}
                                                subtitle: ${uesio/crm.account}
                                                actions:
                                                  - uesio/io.text:
                                                      text: ${uesio/core.owner->uesio/core.firstname}
                                                      uesio.variant: uesio/io.aside
                                            - uesio/io.grid:
                                                items:
                                                  - uesio/io.box:
                                                      components:
                                                        - uesio/io.field:
                                                            fieldId: uesio/crm.email
                                                        - uesio/io.grid:
                                                            uesio.styleTokens:
                                                              root:
                                                                - grid-cols-2
                                                                - gap-4
                                                            items:
                                                              - uesio/io.field:
                                                                  fieldId: uesio/crm.phone_business
                                                              - uesio/io.field:
                                                                  fieldId: uesio/crm.phone_mobile
                                                  - uesio/io.group:
                                                      components:
                                                        - uesio/io.button:
                                                            icon: edit
                                                            signals:
                                                              - signal: route/NAVIGATE_TO_ASSIGNMENT
                                                                collection: uesio/crm.lead
                                                                viewtype: detail
                                                                recordid: ${uesio/core.id}
          - id: table
            label: Table View
            components:
              - uesio/io.table:
                  wire: leads
                  columns:
                    - field: uesio/crm.firstname
                    - field: uesio/crm.lastname
                    - field: uesio/crm.email
                    - field: uesio/crm.account
                  mode: EDIT
  wires:
    leads:
      collection: uesio/crm.lead
      fields:
        uesio/crm.firstname: null
        uesio/core.id: null
        uesio/crm.lastname: null
        uesio/core.updatedat: null
        uesio/core.createdat: null
        uesio/crm.account: null
        uesio/crm.email: null
        uesio/crm.mailing_city: null
        uesio/crm.mailing_country: null
        uesio/crm.phone_business: null
        uesio/crm.phone_mobile: null
        uesio/crm.status: null
        uesio/crm.rating: null
        uesio/crm.industry: null
        uesio/crm.image_url: null
        uesio/crm.contact_image: null
        uesio/core.createdby: null
        uesio/core.owner: null
      order:
        - field: uesio/core.createdat
          desc: true
      conditions:
        - operator: EQ
          field: uesio/core.owner
          valueSource: VALUE
          value: ""
          inactive: true
          id: owner
    newLead:
      collection: uesio/crm.lead
      fields:
        uesio/crm.account: null
        uesio/crm.firstname: null
        uesio/crm.lastname: null
        uesio/crm.email: null
        uesio/crm.status: null
        uesio/crm.title: null
        uesio/crm.website: null
        uesio/crm.rating: null
        uesio/crm.phone_mobile: null
        uesio/crm.phone_business: null
        uesio/crm.no_employees: null
        uesio/crm.mailing_city: null
        uesio/crm.mailing_country: null
        uesio/crm.industry: null
        uesio/crm.description: null
        uesio/crm.annual_revenue: null
        uesio/core.id: null
  panels:
    newlead:
      uesio.type: uesio/io.dialog
      components:
        - uesio/io.grid:
            uesio.styleTokens:
              root:
                - grid-cols-3
                - grid-rows-1
            items:
              - uesio/io.list:
                  mode: EDIT
                  wire: newLead
                  components:
                    - uesio/io.field:
                        fieldId: uesio/crm.account
                        displayAs: TEXT
                        label: Company
                    - uesio/io.field:
                        fieldId: uesio/crm.title
                    - uesio/io.field:
                        fieldId: uesio/crm.firstname
                    - uesio/io.field:
                        fieldId: uesio/crm.lastname
                    - uesio/io.field:
                        fieldId: uesio/crm.email
                    - uesio/io.field:
                        fieldId: uesio/crm.annual_revenue
                    - uesio/io.field:
                        fieldId: uesio/crm.industry
                    - uesio/io.field:
                        fieldId: uesio/crm.mailing_street
                    - uesio/io.field:
                        fieldId: uesio/crm.mailing_city
                    - uesio/io.field:
                        fieldId: uesio/crm.mailing_country
                    - uesio/io.field:
                        fieldId: uesio/crm.phone_business
                    - uesio/io.field:
                        fieldId: uesio/crm.phone_mobile
                    - uesio/io.field:
                        fieldId: uesio/crm.description
            columnGap: 12px
            rowGap: 12px
      width: 100%
      height: 60%
      title: New Lead
      actions:
        - uesio/io.button:
            text: $Label{uesio/io.save}
            icon: save
            uesio.variant: uesio/io.primary
            signals:
              - signal: wire/SAVE
                wires:
                  - newLead
              - signal: wire/LOAD
                wires:
                  - leads
              - signal: panel/CLOSE
                panel: newlead
        - uesio/io.button:
            text: $Label{uesio/io.cancel}
            icon: cancel
            uesio.variant: uesio/io.secondary
            signals:
              - signal: wire/CANCEL
                wire: newLead
              - signal: panel/CLOSE
                panel: newlead
