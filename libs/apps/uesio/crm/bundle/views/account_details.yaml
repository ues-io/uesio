name: account_details
definition:
  components:
    - uesio/core.view:
        view: uesio/crm.topbar
    - uesio/io.list:
        uesio.id: accountList
        wire: accounts
        mode: READ
        components:
          - uesio/io.titlebar:
              uesio.variant: uesio/io.main
              title: ${uesio/crm.name}
              subtitle: ${uesio/crm.description}
              actions:
                - uesio/io.group:
                    components:
                      - uesio/io.button:
                          signals:
                            - signal: component/uesio/io.list/TOGGLE_MODE
                              target: accountList
                          text: Edit
                          uesio.variant: uesio/io.secondary
                      - uesio/io.button:
                          signals:
                            - signal: wire/SAVE
                              wires:
                                - accounts
                          text: Save
                          uesio.variant: uesio/io.secondary
                      - uesio/io.button:
                          signals:
                            - signal: wire/CANCEL
                              wire: accounts
                          text: Cancel
                          uesio.variant: uesio/io.secondary
          - uesio/io.box:
              uesio.variant: uesio/io.section
              uesio.styles:
                root:
                  padding: 40px
              components:
                - uesio/io.grid:
                    templateColumns:
                      xs: 1fr
                      md: 1fr 1fr
                      lg: 1fr 1fr 1fr 1fr
                    columnGap: 10px
                    items:
                      - uesio/io.field:
                          fieldId: uesio/crm.logo
                          displayAs: IMAGE
                      - uesio/io.field:
                          fieldId: uesio/core.id
                      - uesio/io.field:
                          fieldId: uesio/crm.name
                      - uesio/io.field:
                          fieldId: uesio/crm.description
                      - uesio/io.field:
                          fieldId: uesio/core.createdat
                      - uesio/io.field:
                          fieldId: uesio/core.updatedat
                      - uesio/io.field:
                          fieldId: uesio/crm.contacts
                          reference:
                            template: "${uesio/crm.firstname} ${uesio/crm.lastname}"
                            components:
                              - uesio/io.tile:
                                  content:
                                    - uesio/io.text:
                                        text: ${uesio/crm.firstname}, ${uesio/crm.lastname}
                                        element: div
                                    - uesio/io.text:
                                        text: ${uesio/core.id}
                                        uesio.styles:
                                          root:
                                            fontSize: 9pt
                                            color: "#666"
                                        element: div
                                  avatar:
                                    - uesio/io.avatar:
                                        text: "-"
  wires:
    accounts:
      collection: uesio/crm.account
      conditions:
        - field: uesio/core.id
          param: recordid
          valueSource: PARAM
      fields:
        uesio/core.id:
        uesio/crm.name:
        uesio/crm.logo:
        uesio/crm.description:
        uesio/core.createdat:
        uesio/core.updatedat:
        uesio/crm.contacts:
          fields:
            uesio/crm.lastname: null
            uesio/crm.firstname: null
  params:
    recordid:
      type: RECORD
      required: true
      collection: uesio/crm.account
