name: account_details
public: true
definition:
  components:
    - uesio/core.view:
        view: uesio/crm.topbar
    - uesio/io.box:
        uesio.variant: uesio/crm.content
        components:
          - uesio/io.list:
              uesio.id: accountList
              wire: accounts
              mode: READ
              components:
                - uesio/io.titlebar:
                    uesio.variant: uesio/io.main
                    title: ${uesio/crm.name}
                    subtitle: ${uesio/crm.description}
                    actions:
                      - uesio/io.group:
                          components:
                            - uesio/io.button:
                                signals:
                                  - signal: component/CALL
                                    component: uesio/io.list
                                    componentsignal: TOGGLE_MODE
                                    targettype: specific
                                    componentid: accountList
                                text: Edit
                                uesio.variant: uesio/io.secondary
                            - uesio/io.button:
                                signals:
                                  - signal: wire/SAVE
                                    wires:
                                      - accounts
                                text: Save
                                uesio.variant: uesio/io.secondary
                            - uesio/io.button:
                                signals:
                                  - signal: wire/CANCEL
                                    wire: accounts
                                text: Cancel
                                uesio.variant: uesio/io.secondary
                - uesio/io.box:
                    uesio.variant: uesio/io.section
                    components:
                      - uesio/io.grid:
                          uesio.variant: uesio/io.four_columns
                          items:
                            - uesio/io.field:
                                fieldId: uesio/crm.logo
                                displayAs: IMAGE
                            - uesio/io.field:
                                fieldId: uesio/core.id
                            - uesio/io.field:
                                fieldId: uesio/crm.name
                            - uesio/io.field:
                                fieldId: uesio/crm.description
                            - uesio/io.field:
                                fieldId: uesio/core.createdat
                            - uesio/io.field:
                                fieldId: uesio/core.updatedat
                            - uesio/io.field:
                                fieldId: uesio/crm.contacts
                                reference:
                                  template: "${uesio/crm.firstname} ${uesio/crm.lastname}"
                                  components:
                                    - uesio/io.tile:
                                        content:
                                          - uesio/io.text:
                                              text: ${uesio/crm.firstname}, ${uesio/crm.lastname}
                                              element: div
                                          - uesio/io.text:
                                              text: ${uesio/core.id}
                                              uesio.styleTokens:
                                                root:
                                                  - text-[7pt]
                                                  - text-slate-500
                                              element: div
                                        avatar:
                                          - uesio/io.avatar:
                                              text: "-"
  wires:
    accounts:
      collection: uesio/crm.account
      conditions:
        - field: uesio/core.id
          param: recordid
          valueSource: PARAM
      fields:
        uesio/core.id:
        uesio/crm.name:
        uesio/crm.logo:
        uesio/crm.description:
        uesio/core.createdat:
        uesio/core.updatedat:
        uesio/crm.contacts:
          fields:
            uesio/crm.lastname: null
            uesio/crm.firstname: null
  params:
    recordid:
      type: RECORD
      required: true
      collection: uesio/crm.account
