name: home
public: true
definition:
  components:
    - uesio/core.view:
        view: uesio/crm.topbar
    - uesio/io.grid:
        uesio.styleTokens:
          root:
            - grid-cols-3
        items:
          - uesio/io.box:
              uesio.variant: uesio/io.section
              components:
                - uesio/io.titlebar:
                    uesio.variant: uesio/io.section
                    title: Recent Accounts
                - uesio/io.deck:
                    id: homeAccounts
                    wire: accounts
                    components:
                      - uesio/io.tile:
                          uesio.variant: uesio/io.item
                          signals:
                            - signal: route/NAVIGATE_TO_ASSIGNMENT
                              collection: uesio/crm.account
                              viewtype: detail
                              recordid: ${uesio/core.id}
                          content:
                            - uesio/io.text:
                                text: ${uesio/crm.name}
                          avatar:
                            - uesio/io.text:
                                uesio.variant: uesio/io.icon
                                color: "#ccc"
                                text: business
          - uesio/io.box:
              uesio.variant: uesio/io.section
              components:
                - uesio/io.titlebar:
                    uesio.variant: uesio/io.section
                    title: Recent Leads
                - uesio/io.deck:
                    id: homeLeads
                    wire: leads
                    components:
                      - uesio/io.tile:
                          uesio.variant: uesio/io.item
                          signals:
                            - signal: route/NAVIGATE_TO_ASSIGNMENT
                              collection: uesio/crm.lead
                              viewtype: detail
                              recordid: ${uesio/core.id}
                          content:
                            - uesio/io.text:
                                text: ${uesio/crm.firstname} ${uesio/crm.lastname}
                          avatar:
                            - uesio/io.text:
                                uesio.variant: uesio/io.icon
                                color: "#cccccc"
                                text: emoji_people
          - uesio/io.box:
              uesio.variant: uesio/io.section
              components:
                - uesio/io.titlebar:
                    uesio.variant: uesio/io.section
                    title: Recent Contacts
                - uesio/io.deck:
                    id: homeContacts
                    wire: contacts
                    components:
                      - uesio/io.tile:
                          uesio.variant: uesio/io.item
                          signals:
                            - signal: route/NAVIGATE_TO_ASSIGNMENT
                              collection: uesio/crm.contact
                              viewtype: detail
                              recordid: ${uesio/core.id}
                          content:
                            - uesio/io.text:
                                text: ${uesio/crm.firstname} ${uesio/crm.lastname}
                          avatar:
                            - uesio/io.text:
                                uesio.variant: uesio/io.icon
                                color: "#ccc"
                                text: person
  wires:
    accounts:
      collection: uesio/crm.account
      fields:
        uesio/core.id:
        uesio/crm.name:
        uesio/core.updatedat:
      limit: 4
      order:
        - field: uesio/core.updatedat
          desc: true
    contacts:
      collection: uesio/crm.contact
      fields:
        uesio/core.id:
        uesio/crm.firstname:
        uesio/crm.lastname:
        uesio/core.updatedat:
      limit: 4
      order:
        - field: uesio/core.updatedat
          desc: true
    leads:
      collection: uesio/crm.lead
      fields:
        uesio/core.id:
        uesio/crm.firstname:
        uesio/crm.lastname:
        uesio/core.updatedat:
      limit: 4
      order:
        - field: uesio/core.updatedat
          desc: true
