name: bundlelisting
definition:
  # Wires are how we pull in data
  wires:
    workspaces:
      collection: uesio/studio.workspace
      fields:
        uesio/core.id:
        uesio/studio.name:
        uesio/studio.app:
          fields:
            uesio/studio.color:
            uesio/studio.icon:
      conditions:
        - field: uesio/core.uniquekey
          value: $Param{app}:$Param{workspacename}
    listing:
      collection: uesio/studio.bundlelisting
      fields:
        uesio/core.uniquekey:
        uesio/studio.description:
        uesio/studio.app:
          fields:
            uesio/core.uniquekey:
            uesio/studio.fullname:
            uesio/studio.color:
            uesio/studio.icon:
      conditions:
        - field: uesio/core.uniquekey
          value: $Param{id}

  components:
    - uesio/io.viewlayout:
        uesio.variant: uesio/studio.main
        left:
          - uesio/core.view:
              uesio.context:
                wire: workspaces
              view: workspacenav
        content:
          - uesio/core.view:
              uesio.display:
                - type: wireHasRecords
                  wire: listing
              uesio.id: bundlelistinglocalview
              view: bundlelistinglocal
              params:
                app: $Param{app}
                workspacename: $Param{workspacename}
                id: $Param{id}
          - uesio/core.view:
              uesio.display:
                - type: wireHasNoRecords
                  wire: listing
              uesio.id: bundlelistingprodview
              view: bundlelistingprod
              params:
                app: $Param{app}
                workspacename: $Param{workspacename}
                id: $Param{id}
