name: leads
definition:
  components:
    - uesio.view:
        view: crm.topbar
    - io.box:
        components:
          - io.titlebar:
              title: Leads
              uesio.variant: io.main
              actions:
                - io.group:
                    components:
                      - io.button:
                          signals:
                            - signal: wire/CREATE_RECORD
                              wire: leads
                          text: New
                          uesio.variant: io.secondary
                          icon: add
                      - io.button:
                          text: Save
                          icon: check
                          uesio.variant: io.primary
                          signals:
                            - signal: wire/SAVE
                              wires:
                                - leads
                            - signal: wire/LOAD
                              wires:
                                - closedleads
                                - recent
          - io.box:
              components:
                - io.group:
                    columnGap: 10px
                    components:
                      - io.image:
                          file: crm.leadstatus
                          height: 2°80px
                      - io.image:
                          file: crm.leadratinggraph
                          height: 280px°
                    uesio.styles:
                      root:
                        padding-left: 80px
                - io.box:
                    uesio.styles:
                      root:
                        padding: 20px
                    components:
                      - io.text:
                          text: Open
                          element: div
                          align: left
                          uesio.styles:
                            root: {}
                          uesio.variant: io.smalltitle
                      - io.table:
                          rowactions:
                            - text: View
                              signals:
                                - path: lead/${uesio.id}
                                  signal: route/NAVIGATE
                            - text: Delete
                              signals:
                                - signal: wire/TOGGLE_DELETE_STATUS
                            - text: Convert Lead
                              signals:
                                - bot: crm.convertlead
                                  signal: bot/CALL
                          columns:
                            - io.column:
                                field: crm.firstname
                            - io.column:
                                field: crm.lastname
                            - io.column:
                                field: crm.account
                            - io.column:
                                field: crm.phone_business
                            - io.column:
                                field: crm.email
                            - io.column:
                                field: crm.mailing_city
                            - io.column:
                                field: crm.mailing_country
                            - io.column:
                                field: crm.industry
                            - io.column:
                                field: crm.status
                            - io.column:
                                field: uesio.updatedat
                            - io.column:
                                field: uesio.createdat
                          id: leadsTable
                          mode: EDIT
                          wire: leads
                          uesio.variant: io.default
                          uesio.styles:
                            root: {}
                    uesio.variant: io.section
              uesio.variant: null
          - io.box:
              uesio.variant: io.section
              components:
                - io.text:
                    text: Closed
                    element: div
                    uesio.styles:
                      root: {}
                    uesio.variant: io.smalltitle
                - io.table:
                    id: closedleadstable
                    mode: READ
                    columns:
                      - io.column:
                          field: crm.converted_to_contact
                      - io.column:
                          field: crm.converted_to_account
                      - io.column:
                          field: crm.converted_opportunity
                      - io.column:
                          field: crm.converted_date
                      - io.column:
                          field: crm.firstname
                      - io.column:
                          field: crm.lastname
                      - io.column:
                          field: crm.mailing_city
                      - io.column:
                          field: crm.mailing_country
                      - io.column:
                          field: crm.industry
                      - io.column:
                          field: crm.status
                    wire: closedleads
                    uesio.variant: io.default
              uesio.styles:
                root:
                  padding: 20px
        uesio.styles:
          root:
            background: "#F0F0F0"
            padding-bottom: 250px
            padding-top: 20px
  wires:
    leads:
      collection: crm.leads
      fields:
        crm.firstname: null
        uesio.id: null
        crm.lastname: null
        uesio.updatedat: null
        uesio.createdat: null
        crm.account: null
        crm.email: null
        crm.mailing_city: null
        crm.mailing_country: null
        crm.phone_business: null
        crm.status: null
        crm.industry: null
      conditions: []
    closedleads:
      type: ""
      fields:
        crm.status: null
        crm.industry: null
        crm.mailing_country: null
        crm.mailing_city: null
        crm.account: null
        crm.lastname: null
        crm.firstname: null
        uesio.updatedat: null
        uesio.createdat: null
        uesio.id: null
        crm.converted_date: null
        crm.converted_opportunity: null
        crm.converted_to_account: null
        crm.converted_to_contact: null
      collection: crm.leads
      conditions:
        - field: crm.status
          value: CLOSED
    recent:
      type: ""
      fields:
        crm.account: null
        crm.lastname: null
        crm.firstname: null
      collection: crm.leads
