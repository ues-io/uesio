name: contact_details
definition:
  components:
    - uesio.view:
        view: crm.topbar
    - io.list:
        id: contactList
        wire: contacts
        mode: READ
        components:
          - io.titlebar:
              uesio.variant: io.main
              title: ${crm.firstname} ${crm.lastname}
              subtitle: ${["crm.account"]["crm.name"]}
              actions:
                - io.group:
                    components:
                      - io.button:
                          signals:
                            - signal: component/io.list/TOGGLE_MODE
                              target: contactList
                          text: Edit
                          uesio.variant: io.secondary
                      - io.button:
                          signals:
                            - signal: wire/SAVE
                              wires:
                                - contacts
                          text: Save
                          uesio.variant: io.secondary
                      - io.button:
                          signals:
                            - signal: wire/CANCEL
                              wire: contacts
                          text: Cancel
                          uesio.variant: io.secondary
          - io.box:
              uesio.variant: io.section
              uesio.styles:
                root:
                  padding: 40px
              components:
                - io.grid:
                    templateColumns:
                      xs: 1fr
                      md: 1fr 1fr
                      lg: 1fr 1fr 1fr 1fr
                    columnGap: 10px
                    items:
                      - io.field:
                          fieldId: uesio.id
                      - io.field:
                          fieldId: crm.firstname
                      - io.field:
                          fieldId: crm.lastname
                      - io.field:
                          fieldId: crm.gender
                      - io.field:
                          fieldId: crm.deceased
                      - io.field:
                          fieldId: crm.account
                      - io.field:
                          fieldId: crm.birthdate
                      - io.field:
                          fieldId: uesio.updatedat
                      - io.field:
                          fieldId: uesio.createdat
  wires:
    contacts:
      collection: crm.contacts
      conditions:
        - field: uesio.id
          param: contactid
          valueSource: PARAM
      fields:
        crm.account:
          fields:
            crm.name:
        crm.birthdate:
        crm.deceased:
        crm.firstname:
        crm.gender:
        uesio.id:
        crm.lastname:
        uesio.updatedat:
        uesio.createdat:
  params:
    contactid:
      type: recordId
      required: true
      collection: crm.contacts
