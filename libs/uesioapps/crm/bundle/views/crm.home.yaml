name: home
definition:
  components:
    - uesio.view:
        view: crm.topbar
    - io.box:
        uesio.variant: io.section
        components:
          - io.titlebar:
              uesio.variant: io.section
              title: Recent Leads
          - io.deck:
              id: homeLeads
              wire: leads
              uesio.variant: io.section
              components:
                - io.tile:
                    uesio.variant: io.item
                    signals:
                      - signal: route/NAVIGATE
                        path: lead/${crm.id}
                    content:
                      - io.text:
                          text: ${crm.firstname} ${crm.lastname}
                    avatar:
                      - io.text:
                          uesio.variant: io.icon
                          color: "#ccc"
                          text: emoji_people
    - io.box:
        uesio.variant: io.section
        components:
          - io.titlebar:
              uesio.variant: io.section
              title: Recent Accounts
          - io.deck:
              id: homeAccounts
              wire: accounts
              uesio.variant: io.section
              components:
                - io.tile:
                    uesio.variant: io.item
                    signals:
                      - signal: route/NAVIGATE
                        path: account/${crm.id}
                    content:
                      - io.text:
                          text: ${crm.name}
                    avatar:
                      - io.text:
                          uesio.variant: io.icon
                          color: "#ccc"
                          text: business
    - io.box:
        uesio.variant: io.section
        components:
          - io.titlebar:
              uesio.variant: io.section
              title: Recent Contacts
          - io.deck:
              id: homeContacts
              wire: contacts
              uesio.variant: io.section
              components:
                - io.tile:
                    uesio.variant: io.item
                    signals:
                      - signal: route/NAVIGATE
                        path: contact/${crm.id}
                    content:
                      - io.text:
                          text: ${crm.firstname} ${crm.lastname}
                    avatar:
                      - io.text:
                          uesio.variant: io.icon
                          color: "#ccc"
                          text: person
  wires:
    accounts:
      collection: crm.accounts
      fields:
        crm.id:
        crm.name:
        crm.updated:
      limit: 4
      order:
        - field: crm.updated
          desc: true
    contacts:
      collection: crm.contacts
      fields:
        crm.id:
        crm.firstname:
        crm.lastname:
        crm.updated:
      limit: 4
      order:
        - field: crm.updated
          desc: true
    leads:
      collection: crm.leads
      fields:
        crm.id:
        crm.firstname:
        crm.lastname:
        crm.updated:
      limit: 4
      order:
        - field: crm.updated
          desc: true
